import pymarc

#pymarc.marcxml.record_to_xml("teste.mrk", quiet=False, namespace=False)

from pymarc import MARCReader

itens=["teste_itens/item (1).sav",
"teste_itens/item (2).sav",
"teste_itens/item (3).sav",
"teste_itens/item (4).sav",
"teste_itens/item (5).sav",
"teste_itens/item (6).sav",
"teste_itens/item (7).sav",
"teste_itens/item (8).sav",
"teste_itens/item (9).sav",
"teste_itens/item (10).sav",
"teste_itens/item (11).sav",
"teste_itens/item (12).sav",
"teste_itens/item (13).sav",
"teste_itens/item (14).sav",
"teste_itens/item (15).sav",
"teste_itens/item (16).sav",
"teste_itens/item (17).sav",
"teste_itens/item (18).sav",
"teste_itens/item (19).sav",
"teste_itens/item (20).sav",
"teste_itens/item (21).sav",
"teste_itens/item (22).sav",
"teste_itens/item (23).sav",
"teste_itens/item (24).sav",
"teste_itens/item (25).sav",
"teste_itens/item (26).sav",
"teste_itens/item (27).sav",
"teste_itens/item (28).sav",
"teste_itens/item (29).sav",
"teste_itens/item (30).sav",
"teste_itens/item (31).sav",
"teste_itens/item (32).sav",
"teste_itens/item (33).sav",
"teste_itens/item (34).sav",
"teste_itens/item (35).sav",
"teste_itens/item (36).sav",
"teste_itens/item (37).sav",
"teste_itens/item (38).sav",
"teste_itens/item (39).sav",
"teste_itens/item (40).sav",
"teste_itens/item (41).sav",
"teste_itens/item (42).sav",
"teste_itens/item (43).sav",
"teste_itens/item (44).sav",
"teste_itens/item (45).sav",
"teste_itens/item (46).sav",
"teste_itens/item (47).sav",
"teste_itens/item (48).sav",
"teste_itens/item (49).sav",
"teste_itens/item (50).sav",
"teste_itens/item (51).sav",
"teste_itens/item (52).sav",
"teste_itens/item (53).sav",
"teste_itens/item (54).sav",
"teste_itens/item (55).sav",
"teste_itens/item (56).sav",
"teste_itens/item (57).sav",
"teste_itens/item (58).sav",
"teste_itens/item (59).sav",
"teste_itens/item (60).sav",
"teste_itens/item (61).sav",
"teste_itens/item (62).sav",
"teste_itens/item (63).sav",
"teste_itens/item (64).sav",
"teste_itens/item (65).sav",
"teste_itens/item (66).sav",
"teste_itens/item (67).sav",
"teste_itens/item (68).sav",
"teste_itens/item (69).sav",
"teste_itens/item (70).sav",
"teste_itens/item (71).sav",
"teste_itens/item (72).sav",
"teste_itens/item (73).sav",
"teste_itens/item (74).sav",
"teste_itens/item (75).sav",
"teste_itens/item (76).sav",
"teste_itens/item (77).sav",
"teste_itens/item (78).sav",
"teste_itens/item (79).sav",
"teste_itens/item (80).sav",
"teste_itens/item (81).sav",
"teste_itens/item (82).sav",
"teste_itens/item (83).sav",
"teste_itens/item (84).sav",
"teste_itens/item (85).sav",
"teste_itens/item (86).sav",
"teste_itens/item (87).sav",
"teste_itens/item (88).sav",
"teste_itens/item (89).sav",
"teste_itens/item (90).sav",
"teste_itens/item (91).sav",
"teste_itens/item (92).sav",
"teste_itens/item (93).sav",
"teste_itens/item (94).sav",
"teste_itens/item (95).sav",
"teste_itens/item (96).sav",
"teste_itens/item (97).sav",
"teste_itens/item (98).sav",
"teste_itens/item (99).sav",
"teste_itens/item (100).sav",
"teste_itens/item (101).sav",
"teste_itens/item (102).sav",
"teste_itens/item (103).sav",
"teste_itens/item (104).sav",
"teste_itens/item (105).sav",
"teste_itens/item (106).sav",
"teste_itens/item (107).sav",
"teste_itens/item (108).sav",
"teste_itens/item (109).sav",
"teste_itens/item (110).sav",
"teste_itens/item (111).sav",
"teste_itens/item (112).sav",
"teste_itens/item (113).sav",
"teste_itens/item (114).sav",
"teste_itens/item (115).sav",
"teste_itens/item (116).sav",
"teste_itens/item (117).sav",
"teste_itens/item (118).sav",
"teste_itens/item (119).sav",
"teste_itens/item (120).sav",
"teste_itens/item (121).sav",
"teste_itens/item (122).sav",
"teste_itens/item (123).sav",
"teste_itens/item (124).sav",
"teste_itens/item (125).sav",
"teste_itens/item (126).sav",
"teste_itens/item (127).sav",
"teste_itens/item (128).sav",
"teste_itens/item (129).sav",
"teste_itens/item (130).sav",
"teste_itens/item (131).sav",
"teste_itens/item (132).sav",
"teste_itens/item (133).sav",
"teste_itens/item (134).sav",
"teste_itens/item (135).sav",
"teste_itens/item (136).sav",
"teste_itens/item (137).sav",
"teste_itens/item (138).sav",
"teste_itens/item (139).sav",
"teste_itens/item (140).sav",
"teste_itens/item (141).sav",
"teste_itens/item (142).sav",
"teste_itens/item (143).sav",
"teste_itens/item (144).sav",
"teste_itens/item (145).sav",
"teste_itens/item (146).sav",
"teste_itens/item (147).sav",
"teste_itens/item (148).sav",
"teste_itens/item (149).sav",
"teste_itens/item (150).sav",
"teste_itens/item (151).sav",
"teste_itens/item (152).sav",
"teste_itens/item (153).sav",
"teste_itens/item (154).sav",
"teste_itens/item (155).sav",
"teste_itens/item (156).sav",
"teste_itens/item (157).sav",
"teste_itens/item (158).sav",
"teste_itens/item (159).sav",
"teste_itens/item (160).sav",
"teste_itens/item (161).sav",
"teste_itens/item (162).sav",
"teste_itens/item (163).sav",
"teste_itens/item (164).sav",
"teste_itens/item (165).sav",
"teste_itens/item (166).sav",
"teste_itens/item (167).sav",
"teste_itens/item (168).sav",
"teste_itens/item (169).sav",
"teste_itens/item (170).sav",
"teste_itens/item (171).sav",
"teste_itens/item (172).sav",
"teste_itens/item (173).sav",
"teste_itens/item (174).sav",
"teste_itens/item (175).sav",
"teste_itens/item (176).sav",
"teste_itens/item (177).sav",
"teste_itens/item (178).sav",
"teste_itens/item (179).sav",
"teste_itens/item (180).sav",
"teste_itens/item (181).sav",
"teste_itens/item (182).sav",
"teste_itens/item (183).sav",
"teste_itens/item (184).sav",
"teste_itens/item (185).sav",
"teste_itens/item (186).sav",
"teste_itens/item (187).sav",
"teste_itens/item (188).sav",
"teste_itens/item (189).sav",
"teste_itens/item (190).sav",
"teste_itens/item (191).sav",
"teste_itens/item (192).sav",
"teste_itens/item (193).sav",
"teste_itens/item (194).sav",
"teste_itens/item (195).sav",
"teste_itens/item (196).sav",
"teste_itens/item (197).sav",
"teste_itens/item (198).sav",
"teste_itens/item (199).sav",
"teste_itens/item (200).sav",
"teste_itens/item (201).sav",
"teste_itens/item (202).sav",
"teste_itens/item (203).sav",
"teste_itens/item (204).sav",
"teste_itens/item (205).sav",
"teste_itens/item (206).sav",
"teste_itens/item (207).sav",
"teste_itens/item (208).sav",
"teste_itens/item (209).sav",
"teste_itens/item (210).sav",
"teste_itens/item (211).sav",
"teste_itens/item (212).sav",
"teste_itens/item (213).sav",
"teste_itens/item (214).sav",
"teste_itens/item (215).sav",
"teste_itens/item (216).sav",
"teste_itens/item (217).sav",
"teste_itens/item (218).sav",
"teste_itens/item (219).sav",
"teste_itens/item (220).sav",
"teste_itens/item (221).sav",
"teste_itens/item (222).sav",
"teste_itens/item (223).sav",
"teste_itens/item (224).sav",
"teste_itens/item (225).sav",
"teste_itens/item (226).sav",
"teste_itens/item (227).sav",
"teste_itens/item (228).sav",
"teste_itens/item (229).sav",
"teste_itens/item (230).sav",
"teste_itens/item (231).sav",
"teste_itens/item (232).sav",
"teste_itens/item (233).sav",
"teste_itens/item (234).sav",
"teste_itens/item (235).sav",
"teste_itens/item (236).sav",
"teste_itens/item (237).sav",
"teste_itens/item (238).sav",
"teste_itens/item (239).sav",
"teste_itens/item (240).sav",
"teste_itens/item (241).sav",
"teste_itens/item (242).sav",
"teste_itens/item (243).sav",
"teste_itens/item (244).sav",
"teste_itens/item (245).sav",
"teste_itens/item (246).sav",
"teste_itens/item (247).sav",
"teste_itens/item (248).sav",
"teste_itens/item (249).sav",
"teste_itens/item (250).sav",
"teste_itens/item (251).sav",
"teste_itens/item (252).sav",
"teste_itens/item (253).sav",
"teste_itens/item (254).sav",
"teste_itens/item (255).sav",
"teste_itens/item (256).sav",
"teste_itens/item (257).sav",
"teste_itens/item (258).sav",
"teste_itens/item (259).sav",
"teste_itens/item (260).sav",
"teste_itens/item (261).sav",
"teste_itens/item (262).sav",
"teste_itens/item (263).sav",
"teste_itens/item (264).sav",
"teste_itens/item (265).sav",
"teste_itens/item (266).sav",
"teste_itens/item (267).sav",
"teste_itens/item (268).sav",
"teste_itens/item (269).sav",
"teste_itens/item (270).sav",
"teste_itens/item (271).sav",
"teste_itens/item (272).sav",
"teste_itens/item (273).sav",
"teste_itens/item (274).sav",
"teste_itens/item (275).sav",
"teste_itens/item (276).sav",
"teste_itens/item (277).sav",
"teste_itens/item (278).sav",
"teste_itens/item (279).sav",
"teste_itens/item (280).sav",
"teste_itens/item (281).sav",
"teste_itens/item (282).sav",
"teste_itens/item (283).sav",
"teste_itens/item (284).sav",
"teste_itens/item (285).sav",
"teste_itens/item (286).sav",
"teste_itens/item (287).sav",
"teste_itens/item (288).sav",
"teste_itens/item (289).sav",
"teste_itens/item (290).sav",
"teste_itens/item (291).sav",
"teste_itens/item (292).sav",
"teste_itens/item (293).sav",
"teste_itens/item (294).sav",
"teste_itens/item (295).sav",
"teste_itens/item (296).sav",
"teste_itens/item (297).sav",
"teste_itens/item (298).sav",
"teste_itens/item (299).sav",
"teste_itens/item (300).sav",
"teste_itens/item (301).sav",
"teste_itens/item (302).sav",
"teste_itens/item (303).sav",
"teste_itens/item (304).sav",
"teste_itens/item (305).sav",
"teste_itens/item (306).sav",
"teste_itens/item (307).sav",
"teste_itens/item (308).sav",
"teste_itens/item (309).sav",
"teste_itens/item (310).sav",
"teste_itens/item (311).sav",
"teste_itens/item (312).sav",
"teste_itens/item (313).sav",
"teste_itens/item (314).sav",
"teste_itens/item (315).sav",
"teste_itens/item (316).sav",
"teste_itens/item (317).sav",
"teste_itens/item (318).sav",
"teste_itens/item (319).sav",
"teste_itens/item (320).sav",
"teste_itens/item (321).sav",
"teste_itens/item (322).sav",
"teste_itens/item (323).sav",
"teste_itens/item (324).sav",
"teste_itens/item (325).sav",
"teste_itens/item (326).sav",
"teste_itens/item (327).sav",
"teste_itens/item (328).sav",
"teste_itens/item (329).sav",
"teste_itens/item (330).sav",
"teste_itens/item (331).sav",
"teste_itens/item (332).sav",
"teste_itens/item (333).sav",
"teste_itens/item (334).sav",
"teste_itens/item (335).sav",
"teste_itens/item (336).sav",
"teste_itens/item (337).sav",
"teste_itens/item (338).sav",
"teste_itens/item (339).sav",
"teste_itens/item (340).sav",
"teste_itens/item (341).sav",
"teste_itens/item (342).sav",
"teste_itens/item (343).sav",
"teste_itens/item (344).sav",
"teste_itens/item (345).sav",
"teste_itens/item (346).sav",
"teste_itens/item (347).sav",
"teste_itens/item (348).sav",
"teste_itens/item (349).sav",
"teste_itens/item (350).sav",
"teste_itens/item (351).sav",
"teste_itens/item (352).sav",
"teste_itens/item (353).sav"]

f = open('itens_ieb_auto.xml', 'w', encoding = 'utf-8') #utf8
f.write("<?xml version=\"1.0\" encoding=\"UTF-8\" ?><marc:collection xmlns:marc=\"http://www.loc.gov/MARC21/slim\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.loc.gov/MARC21/slim http://www.loc.gov/standards/marcxml/schema/MARC21slim.xsd\">")
        
for item in itens:
    with open(item, 'rb') as fh:
        reader = MARCReader(fh, force_utf8=True)
        for record in reader:
            xml = pymarc.marcxml.record_to_xml(record)
            xml = str(xml)[2:-1].replace("<", "<marc:").replace("<marc:/", "</marc:")
            f.write(str(xml))
f.write("</marc:collection>")

f.close()
        